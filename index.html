<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Eco Clicker - Enjeu Temps & Pollution</title>
<style>
  body {
    margin: 0; padding: 0; font-family: Arial, sans-serif;
    display: flex; height: 100vh; overflow: hidden;
    background: #e6f2e6;
    color: #222;
  }
  #serverContainer {
    flex: 1;
    display: flex;
    justify-content: center;
    align-items: center;
    background: #a3d9a5;
    flex-direction: column;
    gap: 20px;
  }
  #serverBtn {
    border: none;
    background: linear-gradient(135deg, #2c3e50, #34495e);
    width: 250px;
    height: 180px;
    cursor: pointer;
    border-radius: 15px;
    box-shadow: 0 8px 25px rgba(0,0,0,0.3);
    transition: transform 0.1s ease, box-shadow 0.1s ease;
    position: relative;
    overflow: hidden;
  }
  #serverBtn:before {
    content: '';
    position: absolute;
    top: 10px;
    left: 50%;
    transform: translateX(-50%);
    width: 80%;
    height: 8px;
    background: #00ff41;
    border-radius: 4px;
    box-shadow: 0 0 10px #00ff41;
  }
  #serverBtn:after {
    content: 'üñ•Ô∏è SERVEUR IA';
    position: absolute;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    color: #00ff41;
    font-weight: bold;
    font-size: 18px;
    text-shadow: 0 0 5px #00ff41;
  }
  #serverBtn:active {
    transform: scale(0.95);
    box-shadow: 0 4px 15px rgba(0,0,0,0.4);
  }
  .server-lights {
    position: absolute;
    top: 30px;
    left: 20px;
    right: 20px;
    display: flex;
    flex-direction: column;
    gap: 8px;
  }
  .server-row {
    height: 6px;
    background: #1a252f;
    border-radius: 3px;
    position: relative;
  }
  .server-row:nth-child(odd) {
    background: linear-gradient(90deg, #00ff41 0%, #1a252f 30%);
  }
  .server-row:nth-child(even) {
    background: linear-gradient(90deg, #ff6b35 0%, #1a252f 20%);
  }
  #clickInfo {
    color: #2c662d;
    font-size: 16px;
    font-weight: bold;
    text-align: center;
  }
  #shopContainer {
    flex: 1.5;
    display: flex;
    flex-direction: column;
    justify-content: center;
    padding: 20px;
    gap: 30px;
    background: #f0f9f0;
  }
  .upgradeSection {
    flex: 1;
    overflow-y: auto;
  }
  .upgradeSection h2 {
    margin-top: 0;
    font-size: 1.5em;
    color: #2c662d;
  }
  .upgradeBtn {
    display: block;
    width: 100%;
    margin-bottom: 10px;
    padding: 10px;
    font-size: 1.1em;
    background-color: #6fbf73;
    color: white;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    transition: background-color 0.3s ease;
  }
  .upgradeBtn:disabled {
    background-color: #a0d1a0;
    cursor: not-allowed;
  }
  .upgradeBtn:hover:not(:disabled) {
    background-color: #4f9e48;
  }
  #infoContainer {
    flex: 1;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    padding: 20px;
    background: #d9f0d9;
    border-left: 3px solid #2c662d;
    width: 280px;
    align-items: center;
  }
  .barContainer {
    height: 25%;
    display: flex;
    flex-direction: column;
    justify-content: center;
    gap: 10px;
    width: 100%;
  }
  .barLabel {
    font-weight: bold;
    font-size: 1.1em;
    margin-bottom: 6px;
    text-align: center;
  }
  .bar {
    width: 35px;
    height: 150px;
    background: #ccc;
    border-radius: 17px;
    margin: 0 auto;
    position: relative;
    overflow: hidden;
  }
  .barFill {
    position: absolute;
    bottom: 0;
    width: 100%;
    border-radius: 17px 17px 0 0;
  }
  #dollarsBar .barFill {
    background: #4caf50;
  }
  #pollutionBar .barFill {
    background: #e74c3c;
  }
  #timeBar .barFill {
    background: #f39c12;
  }
  #planetImageContainer {
    display: flex;
    align-items: center;
    gap: 15px;
    margin: 15px 0;
  }
  #planetImage {
    width: 120px;
    height: 120px;
    border-radius: 50%;
    object-fit: cover;
    box-shadow: 0 0 15px rgba(44, 102, 45, 0.6);
    transition: all 0.3s ease;
  }
  #textInfo {
    text-align: center;
    font-size: 1.2em;
    font-weight: bold;
    color: #2c662d;
    margin-top: 10px;
  }
  #message {
    text-align: center;
    color: #d9534f;
    font-weight: bold;
    font-size: 1.2em;
    min-height: 40px;
  }
  #challenge {
    text-align: center;
    font-weight: bold;
    font-size: 1.1em;
    margin-bottom: 15px;
    color: #2c662d;
  }
</style>
</head>
<body>

<div id="serverContainer">
  <button id="serverBtn" title="Cliquez sur le serveur IA pour gagner des dollars">
    <div class="server-lights">
      <div class="server-row"></div>
      <div class="server-row"></div>
      <div class="server-row"></div>
      <div class="server-row"></div>
      <div class="server-row"></div>
      <div class="server-row"></div>
      <div class="server-row"></div>
      <div class="server-row"></div>
    </div>
  </button>
  <div id="clickInfo">Cliquez sur le serveur pour g√©n√©rer des profits !</div>
</div>

<div id="shopContainer">
  <div class="upgradeSection" id="iaUpgrades">
    <h2>Am√©liorations IA</h2>
  </div>
  <div class="upgradeSection" id="greenUpgrades">
    <h2>√ânergies Vertes</h2>
  </div>
</div>

<div id="infoContainer">
  <div id="challenge">Atteins 5000 $ avant que la pollution ne d√©passe 1000 ou que le temps s'√©puise !</div>
  
  <div class="barContainer" id="dollarsBar">
    <div class="barLabel">Dollars</div>
    <div class="bar"><div class="barFill" style="height:0%"></div></div>
  </div>
  
  <div class="barContainer" id="pollutionBar">
    <div class="barLabel">Pollution CO‚ÇÇ</div>
    <div class="bar"><div class="barFill" style="height:0%"></div></div>
  </div>
  
  <div class="barContainer" id="timeBar">
    <div class="barLabel">Temps restant</div>
    <div class="bar"><div class="barFill" style="height:100%"></div></div>
  </div>
  
  <div id="planetImageContainer">
    <img id="planetImage" src="100.png" alt="√âtat de la plan√®te">
  </div>
  
  <div id="textInfo">
    <div>Dollars: <span id="dollarsCount">0</span> $</div>
    <div>Pollution: <span id="pollutionCount">0</span> CO‚ÇÇ</div>
    <div>Temps: <span id="timeCount">120</span>s</div>
    <div>Objectif: <span id="targetCount">5000</span> $</div>
  </div>
  <div id="message"></div>
</div>

<script>
  const serverBtn = document.getElementById('serverBtn');
  const iaUpgradesContainer = document.getElementById('iaUpgrades');
  const greenUpgradesContainer = document.getElementById('greenUpgrades');
  const dollarsCountEl = document.getElementById('dollarsCount');
  const pollutionCountEl = document.getElementById('pollutionCount');
  const timeCountEl = document.getElementById('timeCount');
  const targetCountEl = document.getElementById('targetCount');
  const messageEl = document.getElementById('message');
  const planetImage = document.getElementById('planetImage');

  const dollarsBarFill = document.querySelector('#dollarsBar .barFill');
  const pollutionBarFill = document.querySelector('#pollutionBar .barFill');
  const timeBarFill = document.querySelector('#timeBar .barFill');

  let dollars = 0;
  let pollution = 0;
  let timeLeft = 120; // 2 minutes
  const maxPollution = 1000;
  const maxTime = 120;
  const targetDollars = 5000;
  let pointsPerClick = 1;
  const pollutionIncreaseRate = 3;

  const planetImages = [
    '100.png', // Plan√®te saine
    '50.png',  // Plan√®te moyennement pollu√©e
    '30.png',   // Plan√®te tr√®s pollu√©e
    '0.png'    // Plan√®te d√©truite (m√™me image que tr√®s pollu√©e)
  ];

  const iaUpgradesData = [
    { id: 'server1', name: 'Serveur IA basique', cost: 50, dollarInc: 1, pollutionInc: 10 },
    { id: 'server2', name: 'Serveur IA avanc√©', cost: 200, dollarInc: 5, pollutionInc: 50 },
    { id: 'server3', name: 'Serveur IA ultime', cost: 1000, dollarInc: 20, pollutionInc: 200 },
  ];

  const greenUpgradesData = [
    { id: 'tree', name: 'Planter des arbres', cost: 100, pollutionDec: 30 },
    { id: 'solar', name: 'Panneaux solaires', cost: 500, pollutionDec: 100 },
    { id: 'wind', name: '√âoliennes', cost: 1200, pollutionDec: 250 },
    { id: 'dam', name: 'Barrage hydraulique', cost: 2000, pollutionDec: 400 },
  ];

  let iaUpgradesBought = { server1: 0, server2: 0, server3: 0 };
  let greenUpgradesBought = { tree: 0, solar: 0, wind: 0, dam: 0 };

  function updateInfo() {
    dollarsCountEl.textContent = dollars.toFixed(0);
    pollutionCountEl.textContent = pollution.toFixed(0);
    timeCountEl.textContent = timeLeft.toFixed(0);
  }

  function updateBars() {
    let dollarsPercent = Math.min(dollars / targetDollars * 100, 100);
    dollarsBarFill.style.height = dollarsPercent + '%';

    let pollutionPercent = Math.min(pollution / maxPollution * 100, 100);
    pollutionBarFill.style.height = pollutionPercent + '%';

    let timePercent = Math.max(timeLeft / maxTime * 100, 0);
    timeBarFill.style.height = timePercent + '%';
  }

  function updatePlanetImage() {
    let imageIndex = 0;
    if (pollution < 250) {
      imageIndex = 0;
    } else if (pollution < 500) {
      imageIndex = 1;
    } else if (pollution < 750) {
      imageIndex = 2;
    } else {
      imageIndex = 3;
    }
    planetImage.src = planetImages[imageIndex];
  }

  function canBuy(cost) {
    return dollars >= cost;
  }

  function updateButtons() {
    iaUpgradesData.forEach(upg => {
      const btn = document.getElementById(upg.id);
      if (btn) {
        btn.disabled = !canBuy(upg.cost);
        btn.textContent = `${upg.name} - Co√ªt: ${upg.cost}$ (x${iaUpgradesBought[upg.id]})`;
      }
    });
    greenUpgradesData.forEach(upg => {
      const btn = document.getElementById(upg.id);
      if (btn) {
        btn.disabled = !canBuy(upg.cost);
        btn.textContent = `${upg.name} - Co√ªt: ${upg.cost}$ (x${greenUpgradesBought[upg.id]})`;
      }
    });
  }

  function buyUpgrade(upg, type) {
    if (dollars < upg.cost) return;
    dollars -= upg.cost;
    if (type === 'ia') {
      iaUpgradesBought[upg.id]++;
      pointsPerClick += upg.dollarInc;
      pollution += upg.pollutionInc;
    } else if (type === 'green') {
      greenUpgradesBought[upg.id]++;
      pollution -= upg.pollutionDec;
      if (pollution < 0) pollution = 0;
    }
    updateButtons();
    updateInfo();
    updateBars();
    updatePlanetImage();
  }

  iaUpgradesData.forEach(upg => {
    const btn = document.createElement('button');
    btn.className = 'upgradeBtn';
    btn.id = upg.id;
    btn.textContent = `${upg.name} - Co√ªt: ${upg.cost}$ (x0)`;
    btn.addEventListener('click', () => buyUpgrade(upg, 'ia'));
    iaUpgradesContainer.appendChild(btn);
  });

  greenUpgradesData.forEach(upg => {
    const btn = document.createElement('button');
    btn.className = 'upgradeBtn';
    btn.id = upg.id;
    btn.textContent = `${upg.name} - Co√ªt: ${upg.cost}$ (x0)`;
    btn.addEventListener('click', () => buyUpgrade(upg, 'green'));
    greenUpgradesContainer.appendChild(btn);
  });

  serverBtn.addEventListener('click', () => {
    if (pollution >= maxPollution || timeLeft <= 0) return;
    dollars += pointsPerClick;
    updateInfo();
    updateBars();
    updatePlanetImage();
    checkGameStatus();
    updateButtons();
  });

  // Timer principal
  setInterval(() => {
    if (timeLeft > 0 && pollution < maxPollution && dollars < targetDollars) {
      timeLeft -= 1;
      pollution += pollutionIncreaseRate;
      if (pollution > maxPollution) pollution = maxPollution;
      updateInfo();
      updateBars();
      updatePlanetImage();
      checkGameStatus();
    }
  }, 1000);

  function checkGameStatus() {
    if (dollars >= targetDollars) {
      messageEl.textContent = "üéâ Bravo ! Tu as atteint 5000 $ avant la catastrophe ! üåç‚úÖ";
      disableGame();
    } else if (pollution >= maxPollution) {
      messageEl.textContent = "üíÄ Game Over ! La pollution a d√©truit la plan√®te ! üåçüíÄ";
      disableGame();
    } else if (timeLeft <= 0) {
      messageEl.textContent = "‚è∞ Temps √©coul√© ! Tu n'as pas atteint l'objectif √† temps ! ‚è∞";
      disableGame();
    }
  }

  function disableGame() {
    serverBtn.disabled = true;
    iaUpgradesData.forEach(upg => {
      const btn = document.getElementById(upg.id);
      if (btn) btn.disabled = true;
    });
    greenUpgradesData.forEach(upg => {
      const btn = document.getElementById(upg.id);
      if (btn) btn.disabled = true;
    });
  }

  updateButtons();
  updateInfo();
  updateBars();
  updatePlanetImage();
</script>

</body>
</html>